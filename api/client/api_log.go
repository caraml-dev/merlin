/*
 * Merlin
 *
 * API Guide for accessing Merlin's model management, deployment, and serving functionalities
 *
 * API version: 0.7.0
 * Generated by: Swagger Codegen (https://github.com/swagger-api/swagger-codegen.git)
 */

package client

import (
	"context"
	"io/ioutil"
	"net/http"
	"net/url"
	"strings"

	"github.com/antihax/optional"
)

// Linger please
var (
	_ context.Context
)

type LogAPIService service

/*
LogAPIService Retrieve log from a container
 * @param ctx context.Context - for authentication, logging, cancellation, deadlines, tracing, etc. Passed from http.Request or context.Background().
 * @param name
 * @param podName
 * @param namespace
 * @param cluster
 * @param optional nil or *LogAPILogsGetOpts - Optional Parameters:
     * @param "Follow" (optional.String) -
     * @param "LimitBytes" (optional.String) -
     * @param "Pretty" (optional.String) -
     * @param "Previous" (optional.String) -
     * @param "SinceSeconds" (optional.String) -
     * @param "SinceTime" (optional.String) -
     * @param "TailLines" (optional.String) -
     * @param "Timestamps" (optional.String) -


*/

type LogAPILogsGetOpts struct {
	Follow       optional.String
	LimitBytes   optional.String
	Pretty       optional.String
	Previous     optional.String
	SinceSeconds optional.String
	SinceTime    optional.String
	TailLines    optional.String
	Timestamps   optional.String
}

func (a *LogAPIService) LogsGet(ctx context.Context, name string, podName string, namespace string, cluster string, localVarOptionals *LogAPILogsGetOpts) (*http.Response, error) {
	var (
		localVarHTTPMethod = strings.ToUpper("Get")
		localVarPostBody   interface{}
		localVarFileName   string
		localVarFileBytes  []byte
	)

	// create path and map variables
	localVarPath := a.client.cfg.BasePath + "/logs"

	localVarHeaderParams := make(map[string]string)
	localVarQueryParams := url.Values{}
	localVarFormParams := url.Values{}

	localVarQueryParams.Add("name", parameterToString(name, ""))
	localVarQueryParams.Add("pod_name", parameterToString(podName, ""))
	localVarQueryParams.Add("namespace", parameterToString(namespace, ""))
	localVarQueryParams.Add("cluster", parameterToString(cluster, ""))
	if localVarOptionals != nil && localVarOptionals.Follow.IsSet() {
		localVarQueryParams.Add("follow", parameterToString(localVarOptionals.Follow.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.LimitBytes.IsSet() {
		localVarQueryParams.Add("limit_bytes", parameterToString(localVarOptionals.LimitBytes.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.Pretty.IsSet() {
		localVarQueryParams.Add("pretty", parameterToString(localVarOptionals.Pretty.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.Previous.IsSet() {
		localVarQueryParams.Add("previous", parameterToString(localVarOptionals.Previous.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.SinceSeconds.IsSet() {
		localVarQueryParams.Add("since_seconds", parameterToString(localVarOptionals.SinceSeconds.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.SinceTime.IsSet() {
		localVarQueryParams.Add("since_time", parameterToString(localVarOptionals.SinceTime.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.TailLines.IsSet() {
		localVarQueryParams.Add("tail_lines", parameterToString(localVarOptionals.TailLines.Value(), ""))
	}
	if localVarOptionals != nil && localVarOptionals.Timestamps.IsSet() {
		localVarQueryParams.Add("timestamps", parameterToString(localVarOptionals.Timestamps.Value(), ""))
	}
	// to determine the Content-Type header
	localVarHTTPContentTypes := []string{}

	// set Content-Type header
	localVarHTTPContentType := selectHeaderContentType(localVarHTTPContentTypes)
	if localVarHTTPContentType != "" {
		localVarHeaderParams["Content-Type"] = localVarHTTPContentType
	}

	// to determine the Accept header
	localVarHTTPHeaderAccepts := []string{}

	// set Accept header
	localVarHTTPHeaderAccept := selectHeaderAccept(localVarHTTPHeaderAccepts)
	if localVarHTTPHeaderAccept != "" {
		localVarHeaderParams["Accept"] = localVarHTTPHeaderAccept
	}
	if ctx != nil {
		// API Key Authentication
		if auth, ok := ctx.Value(ContextAPIKey).(APIKey); ok {
			var key string
			if auth.Prefix != "" {
				key = auth.Prefix + " " + auth.Key
			} else {
				key = auth.Key
			}
			localVarHeaderParams["Authorization"] = key

		}
	}
	r, err := a.client.prepareRequest(ctx, localVarPath, localVarHTTPMethod, localVarPostBody, localVarHeaderParams, localVarQueryParams, localVarFormParams, localVarFileName, localVarFileBytes)
	if err != nil {
		return nil, err
	}

	localVarHTTPResponse, err := a.client.callAPI(r)
	if err != nil || localVarHTTPResponse == nil {
		return localVarHTTPResponse, err
	}

	localVarBody, err := ioutil.ReadAll(localVarHTTPResponse.Body)
	localVarHTTPResponse.Body.Close()
	if err != nil {
		return localVarHTTPResponse, err
	}

	if localVarHTTPResponse.StatusCode >= 300 {
		newErr := GenericSwaggerError{
			body:  localVarBody,
			error: localVarHTTPResponse.Status,
		}

		return localVarHTTPResponse, newErr
	}

	return localVarHTTPResponse, nil
}
